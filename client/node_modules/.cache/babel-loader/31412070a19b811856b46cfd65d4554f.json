{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar ANIMATION_DURATION = 300;\n\nvar CollapseTransition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inherits2.default)(CollapseTransition, _React$Component);\n\n  function CollapseTransition() {\n    (0, _classCallCheck2.default)(this, CollapseTransition);\n    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(CollapseTransition).apply(this, arguments));\n  }\n\n  (0, _createClass2.default)(CollapseTransition, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.beforeEnter();\n\n      if (this.props.isShow) {\n        this.enter();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.beforeLeave();\n      this.leave();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.isShow !== nextProps.isShow) this.triggerChange(nextProps.isShow);\n    }\n  }, {\n    key: \"triggerChange\",\n    value: function triggerChange(isShow) {\n      clearTimeout(this.enterTimer);\n      clearTimeout(this.leaveTimer);\n\n      if (isShow) {\n        this.beforeEnter();\n        this.enter();\n      } else {\n        this.beforeLeave();\n        this.leave();\n      }\n    }\n  }, {\n    key: \"beforeEnter\",\n    value: function beforeEnter() {\n      var el = this.selfRef; //prepare\n\n      if (el != null) {\n        el.dataset.oldPaddingTop = el.style.paddingTop;\n        el.dataset.oldPaddingBottom = el.style.paddingBottom;\n        el.dataset.oldOverflow = el.style.overflow;\n        el.style.height = '0';\n        el.style.paddingTop = \"0\";\n        el.style.paddingBottom = \"0\";\n      }\n    }\n  }, {\n    key: \"enter\",\n    value: function enter() {\n      var _this = this;\n\n      var el = this.selfRef; //start\n\n      if (el != null) {\n        el.style.display = 'block';\n\n        if (el.scrollHeight !== 0) {\n          el.style.height = el.scrollHeight + 'px';\n          el.style.paddingTop = el.dataset.oldPaddingTop;\n          el.style.paddingBottom = el.dataset.oldPaddingBottom;\n        } else {\n          el.style.height = '';\n          el.style.paddingTop = el.dataset.oldPaddingTop;\n          el.style.paddingBottom = el.dataset.oldPaddingBottom;\n        }\n\n        el.style.overflow = 'hidden';\n        this.enterTimer = setTimeout(function () {\n          return _this.afterEnter();\n        }, ANIMATION_DURATION);\n      }\n    }\n  }, {\n    key: \"afterEnter\",\n    value: function afterEnter() {\n      var el = this.selfRef;\n\n      if (el != null) {\n        el.style.display = 'block';\n        el.style.height = '';\n        el.style.overflow = el.dataset.oldOverflow;\n      }\n    }\n  }, {\n    key: \"beforeLeave\",\n    value: function beforeLeave() {\n      var el = this.selfRef;\n\n      if (el != null) {\n        el.dataset.oldPaddingTop = el.style.paddingTop;\n        el.dataset.oldPaddingBottom = el.style.paddingBottom;\n        el.dataset.oldOverflow = el.style.overflow;\n        el.style.display = 'block';\n\n        if (el.scrollHeight !== 0) {\n          el.style.height = el.scrollHeight + 'px';\n        }\n\n        el.style.overflow = 'hidden';\n      }\n    }\n  }, {\n    key: \"leave\",\n    value: function leave() {\n      var _this2 = this;\n\n      var el = this.selfRef;\n\n      if (el != null) {\n        if (el.scrollHeight !== 0) {\n          el.style.height = \"0\";\n          el.style.paddingTop = \"0\";\n          el.style.paddingBottom = \"0\";\n        }\n\n        this.leaveTimer = setTimeout(function () {\n          return _this2.afterLeave();\n        }, ANIMATION_DURATION);\n      }\n    }\n  }, {\n    key: \"afterLeave\",\n    value: function afterLeave() {\n      var el = this.selfRef;\n      if (!el) return;\n      el.style.display = 'none';\n      el.style.height = '';\n      el.style.overflow = el.dataset.oldOverflow;\n      el.style.paddingTop = el.dataset.oldPaddingTop;\n      el.style.paddingBottom = el.dataset.oldPaddingBottom;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _react.default.createElement(\"div\", {\n        className: \"collapse-transition\",\n        style: {\n          overflow: 'hidden'\n        },\n        ref: function ref(div) {\n          return _this3.selfRef = div;\n        }\n      }, this.props.children);\n    }\n  }]);\n  return CollapseTransition;\n}(_react.default.Component);\n\nvar _default = CollapseTransition;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}