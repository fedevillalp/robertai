{"ast":null,"code":"import _classCallCheck from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport Transcript from \"./components/Transcript\";\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport \"./App.css\";\nimport Navbar from \"./components/navbar\";\nimport BarChart from \"./components/barChart\";\nimport TextFields from \"./components/Textfields\";\nimport RegistrationPage from \"./pages/registrationpage\";\nimport Uploader from \"./components/Uploader\";\nimport FrontPage from \"./pages/FrontPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport loginController from \"./controllers/LoginController\";\nimport FileInfoList from \"./components/FileInfoList\";\nimport UploadPage from \"./pages/UploadPage\";\nimport NumberSelector from \"./components/NumberSelector\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      words: [],\n      topWords: null,\n      data: [],\n      transcript: \"Your transcript will appear here\",\n      user: null,\n      fileList: null\n    };\n\n    _this.setUser = function (user) {\n      console.log(\"setUser\", user);\n\n      _this.setState({\n        user: user\n      });\n    };\n\n    _this.createWordMapData = function (wordListandNumbers, wordsSorted) {\n      //this function formats the most repeated words\n      //in data format ready to plot\n      var data = [];\n\n      for (var i = 0; i < wordsSorted.length; i++) {\n        data.push({\n          name: wordsSorted[i],\n          repeated: wordListandNumbers[wordsSorted[i]]\n        });\n      }\n\n      console.log(data);\n    };\n\n    _this.wordMap = function (text) {\n      //This function received a text string and returns \n      // one object of word:times_repeated pairs for all words\n      // and one vector in the order ot repetition from high to low\n      console.log('This is wordmap !!!*****');\n      var textArray = text.split(\" \");\n      var wordContainer = [];\n      var keysSorted = null;\n\n      for (var i = 0; i < textArray.length; i++) {\n        wordContainer[textArray[i]] = (wordContainer[textArray[i]] || 0) + 1; //use key value pairs \n      }\n\n      keysSorted = Object.keys(wordContainer).sort(function (a, b) {\n        return wordContainer[b] - wordContainer[a];\n      });\n\n      _this.createWordMapData(wordContainer, keysSorted);\n\n      return {\n        wordContainer: wordContainer,\n        keysSorted: keysSorted\n      };\n    };\n\n    _this.updateTopWords = function (topWords) {\n      _this.wordMap(_this.state.transcript);\n\n      _this.setState({\n        topWords: topWords\n      });\n    };\n\n    _this.updateResults = function (wordstoCount) {\n      _this.setState({\n        words: wordstoCount\n      });\n\n      _this.wordCount(_this.state.transcript, wordstoCount.toString().trim());\n    };\n\n    _this.getTranscript = function (transcript) {\n      // console.log('getTranscript text', transcript)\n      _this.setState({\n        transcript: transcript\n      });\n    };\n\n    _this.uploaderUrlChanged = function (url) {\n      _this.setState({\n        uploaderUrl: url\n      });\n    };\n\n    _this.wordCount = function (text, words) {\n      var counter = 0;\n      var textArray = text.split(\" \");\n      var searchTerms = words.split(\" \");\n      var result = [];\n\n      for (var k = 0; k < searchTerms.length; k++) {\n        for (var i = 0; i < textArray.length; i++) {\n          if (textArray[i] === searchTerms[k]) {\n            counter++;\n          }\n        }\n\n        result[k] = counter;\n        counter = 0;\n      }\n\n      _this.createObject(result, searchTerms);\n\n      return result;\n    };\n\n    _this.createObject = function (result, searchTerms) {\n      var data = [];\n\n      for (var i = 0; i < searchTerms.length; i++) {\n        data.push({\n          name: searchTerms[i],\n          pv: result[i]\n        });\n      } //Update state to refresh chart\n\n\n      _this.setState({\n        data: data\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    //Authentication Methods\n    value: function componentDidMount() {\n      console.log(\"componentDidMount\");\n      loginController.addUserChangedListener(this.setUser);\n      loginController.recheckLogin();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      console.log(\"WillUnmount\");\n      loginController.removeUserChangedListener(this.setUser);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        loginController: loginController,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, !this.state.user && React.createElement(Route, {\n        path: \"/RegistrationPage\",\n        component: RegistrationPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), !this.state.user && React.createElement(Route, {\n        path: \"/LoginPage/:reason?\",\n        component: LoginPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), !this.state.user && React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: FrontPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), this.state.user && React.createElement(Route, {\n        exact: true,\n        path: \"/UserHomePage\",\n        render: function render(props) {\n          return React.createElement(UploadPage, {\n            user_id: _this2.state.user.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), this.state.user && React.createElement(Route, {\n        exact: true,\n        path: \"/Results/:fileInfoId?\",\n        render: function render(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"container\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"row \",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"col col-lg-6\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, React.createElement(Transcript, {\n            getTranscript: _this2.getTranscript,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"col col-lg-6\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }, React.createElement(TextFields, {\n            updateResults: _this2.updateResults,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            },\n            __self: this\n          }), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }), React.createElement(BarChart, {\n            data: _this2.state.data,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180\n            },\n            __self: this\n          }), React.createElement(NumberSelector, {\n            updateTopWords: _this2.updateTopWords,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }), _this2.state.topWords, _this2.state.transcript))));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;\n{\n  /* { this.state.user ? <div>User: {this.state.user.username} UserID: {this.state.user.id}</div> : null } */\n}","map":{"version":3,"sources":["/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/App.js"],"names":["React","Component","Transcript","BrowserRouter","Router","Route","Switch","Link","Navbar","BarChart","TextFields","RegistrationPage","Uploader","FrontPage","LoginPage","loginController","FileInfoList","UploadPage","NumberSelector","App","state","words","topWords","data","transcript","user","fileList","setUser","console","log","setState","createWordMapData","wordListandNumbers","wordsSorted","i","length","push","name","repeated","wordMap","text","textArray","split","wordContainer","keysSorted","Object","keys","sort","a","b","updateTopWords","updateResults","wordstoCount","wordCount","toString","trim","getTranscript","uploaderUrlChanged","url","uploaderUrl","counter","searchTerms","result","k","createObject","pv","addUserChangedListener","recheckLogin","removeUserChangedListener","props","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Transcript from \"./components/Transcript\";\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport \"./App.css\";\nimport Navbar from \"./components/navbar\";\nimport BarChart from \"./components/barChart\";\nimport TextFields from \"./components/Textfields\";\nimport RegistrationPage from \"./pages/registrationpage\";\nimport Uploader from \"./components/Uploader\";\nimport FrontPage from \"./pages/FrontPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport loginController from \"./controllers/LoginController\"\nimport FileInfoList from \"./components/FileInfoList\";\nimport UploadPage from \"./pages/UploadPage\";\nimport NumberSelector from \"./components/NumberSelector\";\n\n\n\nclass App extends Component {\n\n  state = {\n    words: [],\n    topWords: null,\n    data: [],\n    transcript: \"Your transcript will appear here\",\n    user: null,\n    fileList: null\n  };\n\n  //Authentication Methods\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    loginController.addUserChangedListener(this.setUser);\n    loginController.recheckLogin();\n  }\n\n  componentWillUnmount() {\n    console.log(\"WillUnmount\");\n    loginController.removeUserChangedListener(this.setUser);\n  }\n\n  setUser = (user) => {\n    console.log(\"setUser\", user);\n    this.setState({ user: user });\n  }\n\n  createWordMapData = (wordListandNumbers,wordsSorted) => {\n    //this function formats the most repeated words\n    //in data format ready to plot\n  \n    let data = [];\n  \n      for (let i = 0; i < wordsSorted.length; i++) {\n        data.push({\n          name: wordsSorted[i], repeated: wordListandNumbers[wordsSorted[i]]\n        })\n      }\n  \n      console.log(data);\n  \n  }\n\n   wordMap = (text)=> {\n    //This function received a text string and returns \n    // one object of word:times_repeated pairs for all words\n    // and one vector in the order ot repetition from high to low\n    console.log('This is wordmap !!!*****')\n    let textArray = text.split(\" \");\n    let wordContainer = [];\n    let keysSorted = null;\n    \n    for(let i=0; i<textArray.length;i++){\n      wordContainer[textArray[i]] = (wordContainer[textArray[i]] || 0 ) + 1; //use key value pairs \n    }\n    \n    keysSorted = Object.keys(wordContainer).sort(function(a,b){return wordContainer[b]-wordContainer[a]})\n    \n    this.createWordMapData(wordContainer,keysSorted)\n    return {wordContainer, keysSorted};\n  }\n\n  //get topWords from menu selector to know how many words to use for wordMap\n  updateTopWords = (topWords) => {\n    \n    this.wordMap(this.state.transcript);\n    this.setState({topWords: topWords});\n  }\n\n  //Called from within <TextFields/> component provides words in input text box\n  updateResults = (wordstoCount) => {\n\n    this.setState({\n      words: wordstoCount\n    });\n\n    this.wordCount(this.state.transcript, wordstoCount.toString().trim())\n  }\n\n  getTranscript = (transcript) => {\n    // console.log('getTranscript text', transcript)\n    this.setState({ transcript: transcript })\n\n  }\n\n  uploaderUrlChanged = url => {\n    this.setState({ uploaderUrl: url });\n  }\n\n  //Receives a string with transcript and string with words to search\n  wordCount = (text, words) => {\n\n    let counter = 0;\n    let textArray = text.split(\" \");\n    let searchTerms = words.split(\" \");\n    let result = [];\n\n    for (let k = 0; k < searchTerms.length; k++) {\n      for (let i = 0; i < textArray.length; i++) {\n        if (textArray[i] === searchTerms[k]) {\n          counter++;\n        }\n      }\n      result[k] = counter;\n      counter = 0;\n    }\n\n    this.createObject(result, searchTerms)\n    return result;\n\n  }\n\n  //takes wordCount results creates object and updates state to refresh chart\n  createObject = (result, searchTerms) => {\n\n    let data = [];\n\n    for (let i = 0; i < searchTerms.length; i++) {\n      data.push({\n        name: searchTerms[i], pv: result[i]\n      })\n    }\n\n    //Update state to refresh chart\n    this.setState({\n      data: data\n    });\n  }\n\n  render() {\n\n    return (\n      <Router>\n        <Navbar loginController={loginController} />\n        <br /><br />\n        <Switch>\n          {!this.state.user && <Route path=\"/RegistrationPage\" component={RegistrationPage} />}\n          {!this.state.user && <Route path=\"/LoginPage/:reason?\" component={LoginPage} />}\n          {!this.state.user && <Route exact path=\"/\" component={FrontPage} />}\n\n          {this.state.user && <Route exact path=\"/UserHomePage\" render={props =>\n            <UploadPage user_id={this.state.user.id} />\n                \n              }\n            />}\n\n            \n          \n          {this.state.user && <Route exact path='/Results/:fileInfoId?' render={props =>\n            <div>\n              <div className=\"container\">\n                <div className=\"row \">\n                  <div className=\"col col-lg-6\">\n                    <Transcript getTranscript={this.getTranscript} />\n                  </div>\n                  <div className=\"col col-lg-6\">\n                    <TextFields updateResults={this.updateResults} />\n                    <br></br>\n                    <BarChart data={this.state.data} />\n                    <NumberSelector updateTopWords={this.updateTopWords}/>\n                    {this.state.topWords}\n                    {this.state.transcript}\n                  </div>\n                </div>\n              </div>\n            </div>\n          } />}\n          \n        </Switch>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n\n{/* { this.state.user ? <div>User: {this.state.user.username} UserID: {this.state.user.id}</div> : null } */ }\n\n\n\n"]},"metadata":{},"sourceType":"module"}