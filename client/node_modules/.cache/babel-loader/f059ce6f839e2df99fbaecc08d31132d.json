{"ast":null,"code":"import _classCallCheck from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/components/Uploader.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport UploadButton from './UploadButton'; //**********************************\n//Gets called at <App.js>\n//Gets pointer to audio file \n//Sends pointer to /api/upload\n//**********************************\n\nvar Uploader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Uploader, _Component);\n\n  function Uploader() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Uploader);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Uploader)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cdn_url: null,\n      job_status: null //Do we need the state here ?\n      // Get file from user\n      // File input fields cannot be controlled by React since React cannot set their value\n      // So we will hold a reference to it so we can access the field later\n      // https://reactjs.org/docs/refs-and-the-dom.html\n      // https://reactjs.org/docs/uncontrolled-components.html#the-file-input-tag\n\n    };\n    _this.fileInput = React.createRef();\n\n    _this.uploadFile = function () {\n      //Has a file been selected ? \n      if (!_this.fileInput.current.files.length) {\n        console.log('No file was selected');\n        return;\n      } // Grab file from the reference\n\n\n      var file = _this.fileInput.current.files[0]; // Build FormData to submit to server at /api/upload\n\n      var data = new FormData();\n      data.append('file', file);\n      console.log('This is the file that has been selected:', file); // If you want to add any extra info to this post\n\n      data.append('description', 'blah blah blah');\n      data.append('user_id', _this.props.user_id); //user_id name comming from App\n\n      console.log(\"data\" + data); // Send audio file pointer to our upload API route \n      // which a) uploads to cloudinary b) makes call to REVai \n      // and c) returns cloudinary storage link and revai job status\n\n      axios.post('/api/upload', data).then(function (response) {\n        _this.setState({\n          cdn_url: response.data.urlReceived,\n          //Do we need the state here ?\n          job_status: response.data.job_status //Do we need the state here ?\n\n        });\n\n        window.location.reload(); //TO DO: Remove. <FileInfoList/> called from App.js \n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Uploader, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        ref: this.fileInput,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(UploadButton, {\n        uploadFile: this.uploadFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Uploader;\n}(Component);\n\nexport default Uploader;","map":{"version":3,"sources":["/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/components/Uploader.js"],"names":["React","Component","axios","UploadButton","Uploader","state","cdn_url","job_status","fileInput","createRef","uploadFile","current","files","length","console","log","file","data","FormData","append","props","user_id","post","then","response","setState","urlReceived","window","location","reload"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB,C,CAGA;AAEA;AACA;AACA;AAEA;;IAEMC,Q;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AAAEC,MAAAA,OAAO,EAAE,IAAX;AAAiBC,MAAAA,UAAU,EAAE,IAA7B,CAAqC;AAE7C;AACA;AACA;AACA;AACA;;AANQ,K;UAORC,S,GAAYR,KAAK,CAACS,SAAN,E;;UAEZC,U,GAAa,YAAM;AAEjB;AACA,UAAI,CAAC,MAAKF,SAAL,CAAeG,OAAf,CAAuBC,KAAvB,CAA6BC,MAAlC,EAA0C;AACxCC,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA;AACD,OANgB,CAQjB;;;AACA,UAAMC,IAAI,GAAG,MAAKR,SAAL,CAAeG,OAAf,CAAuBC,KAAvB,CAA6B,CAA7B,CAAb,CATiB,CAWjB;;AACA,UAAMK,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBH,IAApB;AAEAF,MAAAA,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAAwDC,IAAxD,EAfiB,CAiBjB;;AACAC,MAAAA,IAAI,CAACE,MAAL,CAAY,aAAZ,EAA2B,gBAA3B;AACAF,MAAAA,IAAI,CAACE,MAAL,CAAY,SAAZ,EAAuB,MAAKC,KAAL,CAAWC,OAAlC,EAnBiB,CAmB2B;;AAE5CP,MAAAA,OAAO,CAACC,GAAR,CAAY,SAASE,IAArB,EArBiB,CAuBjB;AACA;AACA;;AACAf,MAAAA,KAAK,CAACoB,IAAN,CAAW,aAAX,EAA0BL,IAA1B,EAAgCM,IAAhC,CAAqC,UAACC,QAAD,EAAc;AACjD,cAAKC,QAAL,CAAc;AACZnB,UAAAA,OAAO,EAAEkB,QAAQ,CAACP,IAAT,CAAcS,WADX;AAC0B;AACtCnB,UAAAA,UAAU,EAAEiB,QAAQ,CAACP,IAAT,CAAcV,UAFd,CAE0B;;AAF1B,SAAd;;AAIAoB,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GALiD,CAKpB;AAC9B,OAND;AAOD,K;;;;;;;6BAGQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,GAAG,EAAE,KAAKrB,SAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,YAAD;AAAc,QAAA,UAAU,EAAE,KAAKE,UAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CADF;AAMD;;;;EArDoBT,S;;AAwDvB,eAAeG,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport UploadButton from './UploadButton';\n\n\n//**********************************\n\n//Gets called at <App.js>\n//Gets pointer to audio file \n//Sends pointer to /api/upload\n\n//**********************************\n\nclass Uploader extends Component {\n  state = { cdn_url: null, job_status: null }  //Do we need the state here ?\n\n  // Get file from user\n  // File input fields cannot be controlled by React since React cannot set their value\n  // So we will hold a reference to it so we can access the field later\n  // https://reactjs.org/docs/refs-and-the-dom.html\n  // https://reactjs.org/docs/uncontrolled-components.html#the-file-input-tag\n  fileInput = React.createRef();  \n  \n  uploadFile = () => {\n    \n    //Has a file been selected ? \n    if (!this.fileInput.current.files.length) {\n      console.log('No file was selected');\n      return;\n    }\n\n    // Grab file from the reference\n    const file = this.fileInput.current.files[0];\n\n    // Build FormData to submit to server at /api/upload\n    const data = new FormData()\n    data.append('file', file);\n\n    console.log('This is the file that has been selected:', file);\n\n    // If you want to add any extra info to this post\n    data.append('description', 'blah blah blah');\n    data.append('user_id', this.props.user_id); //user_id name comming from App\n\n    console.log(\"data\" + data);\n\n    // Send audio file pointer to our upload API route \n    // which a) uploads to cloudinary b) makes call to REVai \n    // and c) returns cloudinary storage link and revai job status\n    axios.post('/api/upload', data).then((response) => {\n      this.setState({\n        cdn_url: response.data.urlReceived,   //Do we need the state here ?\n        job_status: response.data.job_status  //Do we need the state here ?\n      })\n      window.location.reload();    //TO DO: Remove. <FileInfoList/> called from App.js \n    })\n  }\n  \n    \n  render() {\n    return(\n      <div>\n          <input type=\"file\" ref={this.fileInput} />\n          <UploadButton uploadFile={this.uploadFile}/> \n      </div>\n    )\n  }\n}\n\nexport default Uploader"]},"metadata":{},"sourceType":"module"}