{"ast":null,"code":"import _classCallCheck from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/components/FileInfoListItem/index.js\";\nimport React from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nvar FileInfoListItem =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FileInfoListItem, _React$Component);\n\n  function FileInfoListItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FileInfoListItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FileInfoListItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      audioJobStatus: 'Loading...'\n    };\n    _this.intervalID = 0;\n\n    _this.requestAudioJobStatus = function () {\n      // uses state to pass in the audio job id this.state.audioJobID\n      axios.post(\"/api/motivation/requestAudioJobStatus\", {\n        audioJobID: _this.props.item.revai_job_id\n      }).then(function (response) {\n        if (response.data.status === 'transcribed') {\n          console.log('request audio status', response);\n\n          _this.setState({\n            audioJobStatus: 'Transcribed'\n          });\n        } else {\n          _this.setState({\n            audioJobStatus: 'In Progress'\n          });\n        }\n      });\n    };\n\n    _this.fancyTimeFormat = function (time) {\n      // Hours, minutes and seconds\n      var hrs = ~~(time / 3600);\n      var mins = ~~(time % 3600 / 60);\n      var secs = ~~time % 60; // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\n\n      var ret = \"\";\n\n      if (hrs > 0) {\n        ret += \"\" + hrs + \":\" + (mins < 10 ? \"0\" : \"\");\n      }\n\n      ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\");\n      ret += \"\" + secs;\n      return ret;\n    };\n\n    _this.mysqlTimeFormater = function (time) {\n      var a = moment(time);\n      return 'hi';\n    };\n\n    return _this;\n  }\n\n  _createClass(FileInfoListItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.requestAudioJobStatus(); //inmediattly ask for status\n\n      this.intervalID = setInterval(function () {\n        _this2.requestAudioJobStatus(); //keep asking\n\n      }, 10000);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.intervalID);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var item = this.props.item;\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.props.index + 1), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, item.audio_file_name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.fancyTimeFormat(item.audio_file_duration), \"s\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \" \", React.createElement(\"a\", {\n        href: item.link_to_audio,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \" Play\")), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.mysqlTimeFormater(item.createdAt)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/results/\" + item.revai_job_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.state.audioJobStatus)));\n    }\n  }]);\n\n  return FileInfoListItem;\n}(React.Component);\n\nexport default withRouter(FileInfoListItem);","map":{"version":3,"sources":["/Users/federico/Library/Mobile Documents/com~apple~CloudDocs/Personal Federico [iCloud]/Projectos/Transcriber/client/src/components/FileInfoListItem/index.js"],"names":["React","Redirect","withRouter","Link","axios","FileInfoListItem","state","audioJobStatus","intervalID","requestAudioJobStatus","post","audioJobID","props","item","revai_job_id","then","response","data","status","console","log","setState","fancyTimeFormat","time","hrs","mins","secs","ret","mysqlTimeFormater","a","moment","setInterval","clearInterval","index","audio_file_name","audio_file_duration","link_to_audio","createdAt","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,kBAArC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAIMC,gB;;;;;;;;;;;;;;;;;UAEFC,K,GAAQ;AAAEC,MAAAA,cAAc,EAAE;AAAlB,K;UAERC,U,GAAa,C;;UAcbC,qB,GAAwB,YAAM;AAC9B;AACAL,MAAAA,KAAK,CAACM,IAAN,CAAW,uCAAX,EAAqD;AAACC,QAAAA,UAAU,EAAC,MAAKC,KAAL,CAAWC,IAAX,CAAgBC;AAA5B,OAArD,EACGC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,YAAIA,QAAQ,CAACC,IAAT,CAAcC,MAAd,KAAyB,aAA7B,EAA4C;AACxCC,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmCJ,QAAnC;;AACF,gBAAKK,QAAL,CAAc;AACZd,YAAAA,cAAc,EAAE;AADJ,WAAd;AAED,SAJD,MAIO;AACL,gBAAKc,QAAL,CAAc;AACZd,YAAAA,cAAc,EAAE;AADJ,WAAd;AAGD;AACF,OAXH;AAYC,K;;UAGDe,e,GAAkB,UAACC,IAAD,EAAU;AACxB;AACA,UAAIC,GAAG,GAAG,CAAC,EAAED,IAAI,GAAG,IAAT,CAAX;AACA,UAAIE,IAAI,GAAG,CAAC,EAAGF,IAAI,GAAG,IAAR,GAAgB,EAAlB,CAAZ;AACA,UAAIG,IAAI,GAAG,CAAC,CAACH,IAAF,GAAS,EAApB,CAJwB,CAMxB;;AACA,UAAII,GAAG,GAAG,EAAV;;AAEA,UAAIH,GAAG,GAAG,CAAV,EAAa;AACTG,QAAAA,GAAG,IAAI,KAAKH,GAAL,GAAW,GAAX,IAAkBC,IAAI,GAAG,EAAP,GAAY,GAAZ,GAAkB,EAApC,CAAP;AACH;;AAEDE,MAAAA,GAAG,IAAI,KAAKF,IAAL,GAAY,GAAZ,IAAmBC,IAAI,GAAG,EAAP,GAAY,GAAZ,GAAkB,EAArC,CAAP;AACAC,MAAAA,GAAG,IAAI,KAAKD,IAAZ;AACA,aAAOC,GAAP;AACH,K;;UAEDC,iB,GAAoB,UAACL,IAAD,EAAU;AAC5B,UAAIM,CAAC,GAAGC,MAAM,CAACP,IAAD,CAAd;AACA,aAAO,IAAP;AACD,K;;;;;;;wCAlDkB;AAAA;;AACf,WAAKd,qBAAL,GADe,CACe;;AAE9B,WAAKD,UAAL,GAAkBuB,WAAW,CAAC,YAAM;AAChC,QAAA,MAAI,CAACtB,qBAAL,GADgC,CACF;;AACjC,OAF4B,EAE1B,KAF0B,CAA7B;AAGH;;;2CAEqB;AAClBuB,MAAAA,aAAa,CAAC,KAAKxB,UAAN,CAAb;AACH;;;6BA0CM;AAEP,UAAIK,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;AACA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,KAAKD,KAAL,CAAWqB,KAAX,GAAiB,CAAvB,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMpB,IAAI,CAACqB,eAAX,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,KAAKZ,eAAL,CAAqBT,IAAI,CAACsB,mBAA1B,CAAN,MAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAK;AAAG,QAAA,IAAI,EAAEtB,IAAI,CAACuB,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAL,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKR,iBAAL,CAAuBf,IAAI,CAACwB,SAA5B,CAAL,CALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE,cAAcxB,IAAI,CAACC,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4C,KAAKR,KAAL,CAAWC,cAAvD,CAAJ,CANJ,CADJ;AAUD;;;;EAvE4BP,KAAK,CAACsC,S;;AA2ErC,eAAepC,UAAU,CAACG,gBAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\n\n\nclass FileInfoListItem extends React.Component {\n  \n    state = { audioJobStatus: 'Loading...' }\n\n    intervalID = 0;\n\n    componentDidMount(){\n        this.requestAudioJobStatus(); //inmediattly ask for status\n        \n        this.intervalID = setInterval(() => {  \n            this.requestAudioJobStatus(); //keep asking\n        }, 10000);\n    }\n\n    componentWillUnmount(){\n        clearInterval(this.intervalID);\n    }\n\n    requestAudioJobStatus = () => {\n    // uses state to pass in the audio job id this.state.audioJobID\n    axios.post(\"/api/motivation/requestAudioJobStatus\" , {audioJobID:this.props.item.revai_job_id} )\n      .then(response => {\n        if (response.data.status === 'transcribed') {\n            console.log('request audio status',response);\n          this.setState({ \n            audioJobStatus: 'Transcribed' })\n        } else {\n          this.setState({  \n            audioJobStatus: 'In Progress'\n         });\n        }\n      });\n    }\n\n    //Convert from seconds to HR:MM:SS\n    fancyTimeFormat = (time) => {   \n        // Hours, minutes and seconds\n        var hrs = ~~(time / 3600);\n        var mins = ~~((time % 3600) / 60);\n        var secs = ~~time % 60;\n\n        // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\n        var ret = \"\";\n\n        if (hrs > 0) {\n            ret += \"\" + hrs + \":\" + (mins < 10 ? \"0\" : \"\");\n        }\n\n        ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\");\n        ret += \"\" + secs;\n        return ret;\n    }\n\n    mysqlTimeFormater = (time) => {\n      var a = moment(time);\n      return 'hi';\n    }\n    \n  render() {\n\n    let item = this.props.item;\n    return (\n        <tr>\n            <td >{this.props.index+1}</td>\n            <td >{item.audio_file_name}</td>\n            <td >{this.fancyTimeFormat(item.audio_file_duration)}s</td>\n            <td> <a href={item.link_to_audio}> Play</a></td> \n            <td>{this.mysqlTimeFormater(item.createdAt)}</td>\n            <td><Link to={\"/results/\" + item.revai_job_id}>{this.state.audioJobStatus}</Link></td>\n        </tr>\n    )\n  }\n\n}\n\nexport default withRouter(FileInfoListItem);\n\n\n"]},"metadata":{},"sourceType":"module"}